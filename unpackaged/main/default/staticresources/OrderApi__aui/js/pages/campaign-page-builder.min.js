function autoResize(e){var t=200,n=400,i="iframe__"+e;t=document.getElementById(i).contentWindow.document.body.scrollHeight,n=document.getElementById(i).contentWindow.document.body.scrollWidth,document.getElementById(i).height=t+"px",document.getElementById(i).width=n+"px"}function regHandlers(){buildItemsArray(),$(".createCls").click(function(e){e.preventDefault();var t=$(this).attr("id"),n=t.substr(0,t.indexOf("-comp"));createElementAF(n)}),panelList.sortable({items:"li:not(.placeholder)",update:sortableRemoteActionUpdateFunction}),$(".draggable").draggable({revert:"invalid",cursor:"move",opacity:.7,helper:"clone",zIndex:999,connectToSortable:"#draggablePanelList",appendTo:"body",start:function(e,t){$(this).hide()},stop:function(e,t){$(this).show()}}),panelList.droppable({drop:function(e,t){var n=t.draggable.attr("id"),i=t.draggable.attr("name");"undefined"==typeof n&&(n=t.draggable.attr("compid"));var l;$(this).attr("id");if("undefined"==typeof n||-1!=n.indexOf("comp_")){l="undefined"==typeof n?"newElement":"pgelem_"+n.split("comp_")[1];var a=$('<li class="pageElementBlock" id="'+l+'" name="'+i+'"><div style="height:150px;width:150px;"><h2>'+i+"</h2></div></li>");$(t.draggable).html(a);var d=items.length;buildItemsArray(),window.location.href=getPageElementUrl(d,i)}}})}function buildItemsArray(){items=[],$(".pageElementBlock",panelList).each(function(e,t){var n=$(t),i=n.attr("id"),l={};l.elementid=i;var a;-1!=i.indexOf("pgelem_")?(l.id=i.split("pgelem_")[1],a=i.split("pgelem_")[1]):(l.id=null,a=i.split("elem_")[1]),l.order=e+1,items.push(l)})}function editElement(e){editElementAF(e)}function deleteElement(e){confirm("Are you sure?")&&deleteElementAF(e)}var panelList,items,testdrag,$iframe;panelList=$("#draggablePanelList"),$iframe=$(".selCompWrapper iframe"),$(function(){regHandlers(),$iframe.zoomer({width:"100%",zoom:.8})});